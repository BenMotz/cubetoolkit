{% extends 'base_admin.html' %}
{% load thumbnail_l %}
{% load hash_filter %}
{% block css %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/messages.css">
<style>
    .volunteer em {
        font-style: normal;
        color: red;
    }
    .volunteer {
        border-top: thin dotted gray;
        padding-top: 0.5rem;
    }
</style>
{% endblock %}

{% block body %}
<h2>{{ VENUE.name }} Volunteers Summary</h2>
{% include "messages.html" %}

<p>
<a href="{% url "view-volunteer-list" %}" title="volunteers profiles">volunteers profiles</a> &#xb7;
<a href="{% url "add-volunteer" %}" title="add new volunteer">add volunteer</a> &#xb7;
<a href="{% url "retire-select-volunteer" %}" title="retire volunteer">retire volunteer</a> &#xb7;
<a href="{% url "unretire-select-volunteer" %}" title="unretire volunteer">unretire volunteer</a><br>
Active {{ VENUE.name }} volunteers: {{ active_count }}</p>

<table class="table table-sm table-striped">
    <thead>
      <tr>
        <th>
            Name
        </th>
        <th>
            Email
        </th>
        <th>
            GDPR opt in
        </th>
        <th>
            Inducted
        </th>
      </tr>
    </thead>

    <tbody>
    {% for volunteer in volunteers %}
        {% with volunteer.member as member %}
            <tr>
                <th scope="row">
                        <a href="{% url "edit-volunteer" volunteer.pk %}">{{ member.name }}{% if not volunteer.active %} (retired){% endif %}</a>
                </th>
                <td>
                    {{ member.email|urlize|default:"<em>Request email address</em>" }}
                </td>
                <td>
                    {% if volunteer.member.gdpr_opt_in %}
                       {{ volunteer.member.gdpr_opt_in|date:"d/m/Y" }}
                    {% endif %}
                </td>
                <td>
                    {{ volunteer.created_at|date:"d/m/Y" }}
                </td>
            </tr>
        {% endwith %}
    {% endfor %}
    </tbody>
</table><!-- table -->

<h4>The volunteer role report can now be found <a href="{% url "view-volunteer-role-report" %}">here</a>.</h4>
<h4>The volunteer training report can now be found <a href="{% url "view-volunteer-training-report" %}">here</a>.</h4>
{% endblock %}
