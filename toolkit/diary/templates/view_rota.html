{% extends "base_view_eventfield.html" %}

{% block title %}
CUBE role rota
{% endblock %}

{% block css %}
{{ block.super }}
<style type="text/css">
    body {font-family:Arial,Helvetica,sans-serif; }
    h1, h2 { margin: 1mm; }
    h1 { font-size: 16pt; }
    h2 { font-size: 14pt; }

    table {
        border-collapse: collapse;
    }

    tr.event_head {
        font-weight: bold;
        font-size: 13pt;
    }
    tr.event_head td {
        padding: 1em 0 0.1em 0;
    }


    .right {
        text-align: right;
    }

    td.rota_box {
        width: 5cm; height: 2em;
        border-style: solid; border-width: 1px;
        border-color: gray;
    }
    td {
        padding: 0.5em;
    }

    @media print {
        /* Don't show header when printed */
        #eventfield_header {
            display: none;
        }
    }
</style>
{% endblock %}

{% block body %}
{{ block.super }}
<h1>Rota from {{ start_date|date:"D d/m/y" }} to {{ end_date|date:"D d/m/y" }}</h1>
<table>

{% for showing in showings %}
    {% ifchanged %}<tr><td colspan="6"><h2>{{ showing.start|date:"F Y" }}</h2></td></tr>{% endifchanged %}
    <tr class="event_head"><td colspan="3">{{ showing.start|date:"D j H:i"}}</td><td colspan="3">{{ showing.event.name }} </td></tr>
    {% for rota_entry in showing.rotaentry_set.all %}
        {% if forloop.counter|divisibleby:2 %}
            <td class="rota_box">   </td><td> {{ rota_entry.role.name }}-{{ rota_entry.rank }} </td></tr>
        {% else %}
            <tr><td colspan="2"></td><td class="right"> {{ rota_entry.role.name }}-{{ rota_entry.rank }} </td><td class="rota_box"></td>
            {% if forloop.last %}
                <td colspan="2"></td></tr>
            {% endif %}
        {% endif %}
    {% endfor %}
{% endfor %}

</table>

{% endblock %}

